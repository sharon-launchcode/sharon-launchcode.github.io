<!DOCTYPE html>
<html>
   <!-- source for script https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Sections_and_Outlines_of_an_HTML5_document -->
   <!--[if lt IE 9]>
  <script>
    document.createElement("header" );
    document.createElement("footer" );
    document.createElement("section"); 
    document.createElement("aside"  );
    document.createElement("nav"    );
    document.createElement("article"); 
    document.createElement("hgroup" ); 
    document.createElement("time"   );
  </script>
  <noscript>
     <strong>Warning !</strong>
     Because your browser does not support HTML5, some elements are created using JavaScript.
     Unfortunately your browser has disabled scripting. Please enable it in order to display this page.
  </noscript>
<![endif]-->
<head>
  <title>Proof of Concept | Home Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/autocomplete.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
   <!-- required for auth and more -->
   <!-- Firebase App is always required and must be first -->
  <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-app.js"></script>

<!-- Add additional services you want to use -->
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-messaging.js"></script>
<!-- <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-functions.js"></script> -->
   <!-- end required for auth and more -->
   <!-- start of authorization of signin for firebase -->
     <script type="text/javascript">
  
    /**
     * From Quick-Start 
     * Handles the sign in button press.
     */
    function toggleSignIn() {
      if (firebase.auth().currentUser) {
        // [START signout]
        firebase.auth().signOut();
        document.getElementById('chat-area').style.visibility = 'hidden';
        // [END signout]
      } else {
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;
        if (email.length < 4) {
          alert('Please enter an email address.');
          return;
        }
        if (password.length < 4) {
          alert('Please enter a password.');
          return;
        }
        // Sign in with email and pass.
        // [START authwithemail]
        firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // [START_EXCLUDE]
          if (errorCode === 'auth/wrong-password') {
            alert('Wrong password.');
          } else {
            alert(errorMessage);
          }
          console.log(error);
          document.getElementById('quickstart-sign-in').disabled = false;       
          // [END_EXCLUDE]
        });
        // [END authwithemail]
      }     
      document.getElementById('quickstart-sign-in').disabled = true;    
    }
    
    /**
     * Handles the sign up button press.
     */
    function handleSignUp() {
      var email = document.getElementById('email').value;
      var password = document.getElementById('password').value;
      if (email.length < 4) {
        alert('Please enter an email address.');
        return;
      }
      if (password.length < 4) {
        alert('Please enter a password.');
        return;
      }
      // Sign in with email and pass.
      // [START createwithemail]
      firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        // [START_EXCLUDE]
        if (errorCode == 'auth/weak-password') {
          alert('The password is too weak.');
        } else {
          alert(errorMessage);
        }
        console.log(error);
        // [END_EXCLUDE]
      });
      // [END createwithemail]
    }

    /**
     * Sends an email verification to the user.
     */
    function sendEmailVerification() {
      // [START sendemailverification]
      firebase.auth().currentUser.sendEmailVerification().then(function() {
        // Email Verification sent!
        // [START_EXCLUDE]
        alert('Email Verification Sent!');
        // [END_EXCLUDE]
      });
      // [END sendemailverification]
    }

    function sendPasswordReset() {
      var email = document.getElementById('email').value;
      // [START sendpasswordemail]
      firebase.auth().sendPasswordResetEmail(email).then(function() {
        // Password Reset Email Sent!
        // [START_EXCLUDE]
        alert('Password Reset Email Sent!');
        // [END_EXCLUDE]
      }).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        // [START_EXCLUDE]
        if (errorCode == 'auth/invalid-email') {
          alert(errorMessage);
        } else if (errorCode == 'auth/user-not-found') {
          alert(errorMessage);
        }
        console.log(error);
        // [END_EXCLUDE]
      });
      // [END sendpasswordemail];
    }
 
    /**
     * initApp handles setting up UI event listeners and registering Firebase auth listeners:
     *  - firebase.auth().onAuthStateChanged: This listener is called when the user is signed in or
     *    out, and that is where we update the UI.
     */
    function initApp() {
      // Listening for auth state changes.
      // [START authstatelistener]
      firebase.auth().onAuthStateChanged(function(user) {
 
        // [START_EXCLUDE silent]
        document.getElementById('quickstart-verify-email').disabled = true;
        // [END_EXCLUDE]
        if (user) {
          // User is signed in.
           document.getElementById('chat-area').style.visibility = 'visible';
          var displayName = user.displayName;
          var email = user.email;
          var emailVerified = user.emailVerified;
          var photoURL = user.photoURL;
          var isAnonymous = user.isAnonymous;
          var uid = user.uid;
          var providerData = user.providerData;
          // [START_EXCLUDE]
          document.getElementById('quickstart-sign-in-status').textContent = 'Signed in';
          document.getElementById('quickstart-sign-in').textContent = 'Sign out';
          document.getElementById('quickstart-account-details').textContent = JSON.stringify(user, null, '  ');
          if (!emailVerified) {
            document.getElementById('quickstart-verify-email').disabled = false;
          }
          // [END_EXCLUDE]
        } else {
          // User is signed out.
          // [START_EXCLUDE]
          document.getElementById('quickstart-sign-in-status').textContent = 'Signed out';
          document.getElementById('quickstart-sign-in').textContent = 'Sign in';
          document.getElementById('quickstart-account-details').textContent = 'null';
          // [END_EXCLUDE]
        }
        // [START_EXCLUDE silent]
        document.getElementById('quickstart-sign-in').disabled = false;
        // [END_EXCLUDE]
      });
      // [END authstatelistener]

      document.getElementById('quickstart-sign-in').addEventListener('click', toggleSignIn, false);
      document.getElementById('quickstart-sign-up').addEventListener('click', handleSignUp, false);
      document.getElementById('quickstart-verify-email').addEventListener('click', sendEmailVerification, false);
      document.getElementById('quickstart-password-reset').addEventListener('click', sendPasswordReset, false);
    }

    window.onload = function() {
      initApp();
      document.getElementById('chat-area').style.visibility='hidden';
    };


   </script>
  <!-- end of authorization of signin for firebase --> 
 </head>
  <body onload="showMyFace()">
     <div class="space25">&nbsp;</div><!-- holder for future accessibility notifications -->
       <div class="row">
       <div class="container">
            <div class="col-md-4"><!-- contains chat -->
           <iframe
              width="350"
              height="430"
              src="https://console.dialogflow.com/api-client/demo/embedded/2826f62d-5973-4ab8-b5c8-84a4d026e807">
          </iframe>
            </div><!-- col md 4 -->       
              <div class="col-md-8">
                   <div class="video-header">
                      <h1>Proof of Concept: Virtual Legal Clinic</h1>
                   </div>
                   <div>
                      <video id="yourVideo" autoplay muted playsinline></video>
                      <video id="friendsVideo" autoplay playsinline></video>
                   </div>   
                   <div>
                      <!-- IMPORTANT REMBER TO CHANGE ID ON BUTTON -->
                   <button onclick="showFriendsFace()" type="button" class="btn btn-primary btn-lg"><span class="glyphicon glyphicon-facetime-video" aria-hidden="true"></span> Call</button>
                   </div>   
                   <script src="https://www.gstatic.com/firebasejs/5.0.2/firebase.js"></script>
                   <script src="js/script.js"></script>
                </div><!-- col-md  8 -->
            </div><!-- container -->  
       </div><!-- row -->
      <!-- @TODO Check for possible conflict of Initial Intake Form versus authentication in signIn -->
       <div class="space25">&nbsp;</div><!-- holder for future accessibility notifications -->
       <div class="row">
            <div class="container">
                 <div class="col-md-4"><!-- upload -->                 
                   <div style="text-align:center">
                     <script>
                       var slackerror = document.querySelector('slack-error');
                       var slackalert = document.querySelector('slack-alert');
                    </script>
                    <div class="alert" aria-live="polite"></div>
                       <h3>Upload Documents with Slack!</h3>
                       <h4>LOG IN with your email account and post to: #sharon-testing</h4>
                       <form id="goToSlackForm">
                       <input class="btn btn-primary btn-lg" type="button" value="Go to SLACK"  onclick="window.location.href='https://slack.com/oauth/authorize?client_id=342068113523.371240123760&scope=files:read'" /> 
                        </form>  
                   </div><!-- wrapper for form -->
                 </div><!-- col md-4 for uploading documents -->
                 
                 <div class="col-md-8"><!-- intake form -->
                    <script>
                       var signinerror = document.querySelector('signin-error');
                       var signinalert = document.querySelector('signin-alert');
                    </script>
                    
                    <div class="alert" aria-live="polite"></div>
                    <div><!-- form wrapper -->
                       <span style="text-align:center"><h3>Sign In</h3></span>
                     <!-- 
                         <form id="signInForm" autocomplete="off" style="text-align:center;">
                            <div>
                              <label for="email">Email:</label>&nbsp;&nbsp;&nbsp;  
                              <input name="email" id="email" type="email" required x-moz-errormessage="Please specify a valid email address.">
                            </div><br />
                            <div>
                              <label for="password">Password:</label>  
                              <input name="password" id="password" type="password" required x-moz-errormessage="Please specify a valid email address.">
                            </div>
                              <div style="margin-top:25px;">
                                <input type="submit" class="btn btn-primary btn-lg" value="Submit" name="signIn" id="signIn">
                         </form>  -->
                       
                      </div><!-- signIn button -->
                    </div><!-- form wrapper -->
                  
                 </div><!-- col md 8 for signIn form --> 
               
               ///////////
               
               
               //////////<div id="signin">
        <section><!-- section for signup buttons -->
         <div class="centerme"><!-- wrapper for signup buttons -->
           <label for="email">Email</label>
          <input style="display:inline;width:auto;padding:5px;" type="text" id="email" name="email" placeholder="Email"/>
          &nbsp;&nbsp;&nbsp;
           <label for="password">Password</label>
          <input style="display:inline;width:auto;padding:5px;" type="password" id="password" name="password" placeholder="Password"/>
          <br/><br/>
          <button disabled id="quickstart-sign-in" name="signin">Sign In</button>
          &nbsp;&nbsp;&nbsp;
          <button id="quickstart-sign-up" name="signup">Sign Up</button>
          &nbsp;&nbsp;&nbsp;
          <button disabled id="quickstart-verify-email" name="verify-email">Send Email Verification</button>
          &nbsp;&nbsp;&nbsp;
          <button id="quickstart-password-reset" name="verify-email">Send Password Reset Email</button>
           </section><!-- signup buttons -->
         </div><!-- closes wrapper for signup buttons-->
        ////////////////////////////////////////////////////////////
        </div><!-- container for intake form -->
       </div><!-- row for intake form -->
     
<!-- scripting for firebase starts here -->
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
<script>
    // Initialize Firebase for Email sign-in
  var config5 = {
    apiKey: "AIzaSyBlY3OteC7Dn0y0diemxPlg62XgVMqkCHg",
    authDomain: "signin-fcc07.firebaseapp.com",
    databaseURL: "https://signin-fcc07.firebaseio.com",
    projectId: "signin-fcc07",
    storageBucket: "signin-fcc07.appspot.com",
    messagingSenderId: "612057419132"
  };
  firebase.initializeApp(config5); 
  //firebase.initializeApp(config1, config2);
</script>
 
  </body>   
</html>
